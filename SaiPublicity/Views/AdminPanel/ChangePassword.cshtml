@model SaiPublicity.Models.AdminChangePasswordModel
@{
    Layout = "~/Views/Shared/_LayoutAdminPanel.cshtml";
}
<style>
    .changePassword {
        min-height: 100vh;
        display: flex;
        justify-content: center;
        align-items: center;
        padding: 20px;
    }

        .changePassword .card {
            width: 450px;
            border-radius: 16px;
            background: #fff;
        }

    .form-control:focus {
        border-color: #ED1C24;
        box-shadow: 0 0 5px rgba(237, 28, 36, 0.2);
    }

    .input-group-text {
        background: transparent;
        border-left: none;
    }

    .input-group .form-control {
        border-right: none;
    }

</style>

<div class="changePassword">
    <div class="card p-4 py-5">
        <div class="text-center mb-4">
            <h3 class="fw-bold text-black">
                <i class="fas fa-lock"></i>
                Change Password
            </h3>
            <p class="text-muted mb-0">Secure your account by updating your password</p>
        </div>

        @if (ViewBag.Success != null)
        {
            <div class="alert alert-success text-center">@ViewBag.Success</div>
        }
        @if (ViewBag.Error != null)
        {
            <div class="alert alert-danger text-center">@ViewBag.Error</div>
        }

        <form asp-action="ChangePassword" method="post" novalidate>
            <div class="mb-3">
                <label asp-for="CurrentPassword" class="form-label fw-semibold">Current Password</label> 
                <div class="input-group">
                    <input asp-for="CurrentPassword" type="password" class="form-control rounded-start" id="currentPassword" autofocus />
                    <span class="input-group-text" style="cursor:pointer;" onclick="togglePassword('currentPassword', this)">
                        <i class="fas fa-eye"></i>
                    </span>
                </div>
            </div>
            <div class="mb-3">
                <label asp-for="NewPassword" class="form-label fw-semibold">New Password</label>
                <div class="input-group">
                    <input asp-for="NewPassword" type="password" class="form-control rounded-start" id="newPassword" />
                    <span class="input-group-text" style="cursor:pointer;" onclick="togglePassword('newPassword', this)">
                        <i class="fas fa-eye"></i>
                    </span>
                </div>
                <span asp-validation-for="NewPassword" class="text-danger small"></span>
            </div>
            <div class="mb-4">
                <label asp-for="ConfirmPassword" class="form-label fw-semibold">Confirm Password</label>
                <div class="input-group">
                    <input asp-for="ConfirmPassword" type="password" class="form-control rounded-start" id="confirmPassword" />
                    <span class="input-group-text" style="cursor:pointer;" onclick="togglePassword('confirmPassword', this)">
                        <i class="fas fa-eye"></i>
                    </span>
                </div>
                <span asp-validation-for="ConfirmPassword" class="text-danger small"></span>
            </div>
            <button type="submit" class="btn btn-danger w-100 py-2 rounded-3 fw-semibold">
                <i class="bi bi-shield-lock me-2"></i> Update Password
            </button>
        </form>

	</div>
</div>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />

    <script>
        function togglePassword(inputId, iconContainer) {
            const input = document.getElementById(inputId);
            const icon = iconContainer.querySelector('i');
            const isPassword = input.type === "password";
            input.type = isPassword ? "text" : "password";
            icon.classList.toggle("fa-eye");
            icon.classList.toggle("fa-eye-slash");
        }
    </script>
}
